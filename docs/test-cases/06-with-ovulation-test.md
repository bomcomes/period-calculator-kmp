# 배란 테스트 기록 통합 테스트 케이스

## 📌 공통 입력 조건

### 생리 기록
- **Period 1**: 2025-01-01 ~ 2025-01-05 (5일간)
- **Period 2**: 2025-01-29 ~ 2025-02-02 (5일간)
- **Period 3**: 2025-02-26 ~ 2025-03-02 (5일간)

### 배란 테스트 기록
- 각 테스트 케이스별로 다르게 설정

### 배란일 직접 입력
- 없음 (테스트별로 필요시 추가)

### 피임약 패키지 시작일
- 없음

### 오늘 날짜
- **2025-03-15**

### 생리 주기 설정
- **평균 주기**: 28일
- **평균 생리 기간**: 5일
- **자동 계산**: false

### 피임약 설정
- **피임약 사용**: false

---

## 배란 테스트 양성 기본 케이스

### TC-06-01: 단일 배란 테스트 양성
#### 📌 테스트 목적
단일 배란 테스트 양성 결과가 기본 계산을 override하는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-03-12: POSITIVE

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**: 2025-03-12 (테스트 양성일)
- **가임기들**: 2025-03-10 ~ 2025-03-13 (배란일 -2 ~ +1)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 배란 테스트 양성일이 배란일로 설정됨
- [ ] 기본 계산 (day 14)이 아닌 테스트 결과 사용
- [ ] 가임기가 테스트 기준으로 계산됨

---

### TC-06-02: 연속 2일 배란 테스트 양성 (LH surge)
#### 📌 테스트 목적
연속된 양성 결과가 있을 때 모든 날짜가 배란일로 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-03-12: POSITIVE
  - 2025-03-13: POSITIVE

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**: 2025-03-12 ~ 2025-03-13 (양성 2일)
- **가임기들**: 2025-03-10 ~ 2025-03-14 (병합된 가임기)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 연속 양성일 모두 배란일로 표시
- [ ] 가임기가 모든 배란일 기준으로 병합
- [ ] 중복 날짜는 한 번만 표시

---

### TC-06-03: 월별 배란 테스트 패턴
#### 📌 테스트 목적
여러 주기에 걸친 배란 테스트 결과가 올바르게 처리되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-01-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-01-15: POSITIVE
  - 2025-02-12: POSITIVE
  - 2025-03-12: POSITIVE

#### ✅ 예상 결과
- **실제 생리 기록**:
  - Period 1 (2025-01-01 ~ 2025-01-05)
  - Period 2 (2025-01-29 ~ 2025-02-02)
  - Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**:
  - 없음 (모두 실제 기록)
- **생리 지연일**: 0
- **배란기들**:
  - 2025-01-15 (1월)
  - 2025-02-12 (2월)
  - 2025-03-12 (3월)
- **가임기들**:
  - 2025-01-13 ~ 2025-01-16 (1월)
  - 2025-02-10 ~ 2025-02-13 (2월)
  - 2025-03-10 ~ 2025-03-13 (3월)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 각 월의 배란 테스트가 독립적으로 처리
- [ ] 각 주기마다 테스트 결과 우선 적용
- [ ] 가임기가 각 배란일 기준으로 계산

---

## 배란 테스트와 예측 비교

### TC-06-04: 예측보다 빠른 배란 (day 10)
#### 📌 테스트 목적
정상 예측(day 14)보다 빠른 배란이 감지될 때의 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-03-08: POSITIVE (day 10 from period end)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**: 2025-03-08 (테스트 양성일)
- **가임기들**: 2025-03-06 ~ 2025-03-09
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 이른 배란이 정상 처리됨
- [ ] 가임기가 이른 배란 기준으로 계산
- [ ] 예측 계산이 무시됨

---

### TC-06-05: 예측과 일치하는 배란 (day 14)
#### 📌 테스트 목적
배란 테스트 결과가 예측과 일치할 때의 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-03-12: POSITIVE (day 14 from period end)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**: 2025-03-12
- **가임기들**: 2025-03-10 ~ 2025-03-13
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 예측과 일치해도 테스트 결과 사용
- [ ] 가임기 계산 정확성
- [ ] 중복 처리 없음

---

### TC-06-06: 예측보다 늦은 배란 (day 18)
#### 📌 테스트 목적
정상 예측(day 14)보다 늦은 배란이 감지될 때의 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-03-16: POSITIVE (day 18 from period end)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**: 2025-03-16 (테스트 양성일)
- **가임기들**: 2025-03-14 ~ 2025-03-17
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 늦은 배란이 정상 처리됨
- [ ] 가임기가 늦은 배란 기준으로 계산
- [ ] 예측 계산이 무시됨

---

## 복수 주기 배란 테스트

### TC-06-07: 2개월 연속 데이터
#### 📌 테스트 목적
2개월 연속 배란 테스트 데이터 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-02-12: POSITIVE
  - 2025-02-13: POSITIVE
  - 2025-03-12: POSITIVE

#### ✅ 예상 결과
- **실제 생리 기록**:
  - Period 2 (2025-01-29 ~ 2025-02-02)
  - Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**:
  - 2025-02-12 ~ 2025-02-13 (2월)
  - 2025-03-12 (3월)
- **가임기들**:
  - 2025-02-10 ~ 2025-02-14 (2월)
  - 2025-03-10 ~ 2025-03-13 (3월)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 각 월의 데이터가 독립적으로 처리
- [ ] 연속 양성일 올바르게 처리
- [ ] 월별 가임기 계산 정확

---

### TC-06-08: 3개월 패턴 분석
#### 📌 테스트 목적
3개월 간의 배란 테스트 패턴 일관성 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-01-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-01-14: POSITIVE
  - 2025-01-15: POSITIVE
  - 2025-02-11: POSITIVE
  - 2025-02-12: POSITIVE
  - 2025-03-11: POSITIVE
  - 2025-03-12: POSITIVE

#### ✅ 예상 결과
- **실제 생리 기록**:
  - Period 1 (2025-01-01 ~ 2025-01-05)
  - Period 2 (2025-01-29 ~ 2025-02-02)
  - Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 없음
- **생리 지연일**: 0
- **배란기들**:
  - 2025-01-14 ~ 2025-01-15 (1월)
  - 2025-02-11 ~ 2025-02-12 (2월)
  - 2025-03-11 ~ 2025-03-12 (3월)
- **가임기들**:
  - 2025-01-12 ~ 2025-01-16 (1월)
  - 2025-02-09 ~ 2025-02-13 (2월)
  - 2025-03-09 ~ 2025-03-13 (3월)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 3개월 패턴 일관성
- [ ] 연속 양성 패턴 반복 처리
- [ ] 각 월별 독립적 계산

---

### TC-06-09: 불규칙 양성 결과
#### 📌 테스트 목적
불규칙한 배란 테스트 양성 패턴 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-01-01
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-01-10: POSITIVE (early)
  - 2025-02-15: POSITIVE (late)
  - 2025-03-11: POSITIVE (normal)

#### ✅ 예상 결과
- **실제 생리 기록**:
  - Period 1 (2025-01-01 ~ 2025-01-05)
  - Period 2 (2025-01-29 ~ 2025-02-02)
  - Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 없음
- **생리 지연일**: 0
- **배란기들**:
  - 2025-01-10 (이른 배란)
  - 2025-02-15 (늦은 배란)
  - 2025-03-11 (정상 범위)
- **가임기들**:
  - 2025-01-08 ~ 2025-01-11 (1월)
  - 2025-02-13 ~ 2025-02-16 (2월)
  - 2025-03-09 ~ 2025-03-12 (3월)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 불규칙 패턴 모두 수용
- [ ] 각 테스트 결과 독립 처리
- [ ] 가임기 계산 정확성

---

## 특수 케이스

### TC-06-10: 생리 중 양성 (예외 케이스)
#### 📌 테스트 목적
생리 기간 중 배란 테스트 양성 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-26
  - 종료: 2025-03-31
- **배란 테스트**:
  - 2025-02-28: POSITIVE (생리 중)
  - 2025-03-12: POSITIVE (정상)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-26 ~ 2025-03-30
- **생리 지연일**: 0
- **배란기들**:
  - 2025-02-28 (생리 중이지만 표시)
  - 2025-03-12
- **가임기들**:
  - 2025-02-26 ~ 2025-03-01 (생리와 겹침)
  - 2025-03-10 ~ 2025-03-13
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 생리 중 양성도 기록됨
- [ ] 가임기가 생리와 겹칠 수 있음
- [ ] 예외 상황이지만 데이터 표시

⚠️ **참고**: 생리 중 배란 테스트 양성은 드물지만 사용자 입력 데이터는 모두 표시

---

### TC-06-11: 짧은 주기에서 배란 테스트 (24일 주기)
#### 📌 테스트 목적
짧은 주기에서 배란 테스트 결과 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-31
- **생리 주기 설정 변경**:
  - 평균 주기: 24일
- **배란 테스트**:
  - 2025-03-08: POSITIVE (day 10 - 짧은 주기 정상)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-03-22 ~ 2025-03-26 (24일 주기)
- **생리 지연일**: 0
- **배란기들**: 2025-03-08
- **가임기들**: 2025-03-06 ~ 2025-03-09
- **주기**: 24일

#### 🔍 검증 포인트
- [ ] 짧은 주기 특수 공식 적용
- [ ] 이른 배란이 정상 범위임
- [ ] 다음 생리 예정일 계산 정확

---

### TC-06-12: 긴 주기에서 배란 테스트 (35일 주기)
#### 📌 테스트 목적
긴 주기에서 배란 테스트 결과 처리 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-04-10
- **생리 주기 설정 변경**:
  - 평균 주기: 35일
- **배란 테스트**:
  - 2025-03-19: POSITIVE (day 21 - 긴 주기 정상)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-02-26 ~ 2025-03-02)
- **생리 예정일들**: 2025-04-02 ~ 2025-04-06 (35일 주기)
- **생리 지연일**: 0
- **배란기들**: 2025-03-19
- **가임기들**: 2025-03-17 ~ 2025-03-20
- **주기**: 35일

#### 🔍 검증 포인트
- [ ] 긴 주기 특수 공식 적용
- [ ] 늦은 배란이 정상 범위임
- [ ] 다음 생리 예정일 계산 정확

---

## 테스트 요약

### 커버리지
- **기본 케이스**: 단일, 연속, 월별 패턴 (TC-06-01 ~ TC-06-03)
- **예측 비교**: 빠른, 일치, 늦은 배란 (TC-06-04 ~ TC-06-06)
- **복수 주기**: 2개월, 3개월, 불규칙 (TC-06-07 ~ TC-06-09)
- **특수 케이스**: 생리 중, 짧은 주기, 긴 주기 (TC-06-10 ~ TC-06-12)

### 주요 검증 사항
1. 배란 테스트 양성 결과가 기본 계산을 override
2. 연속 양성일 모두 표시
3. 가임기는 각 배란일 -2 ~ +1일로 계산 후 병합
4. 사용자 입력 데이터는 예외 상황에서도 모두 표시
5. 주기별 독립적 처리