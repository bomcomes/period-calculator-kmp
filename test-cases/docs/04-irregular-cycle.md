# 불규칙한 주기 테스트 케이스

## 📌 공통 입력 조건

모든 테스트 케이스는 동일한 입력 조건을 사용합니다:

- **생리 기록**: 
  - 2025-01-01 ~ 2025-01-05
  - 2025-01-26 ~ 2025-01-30 (25일 주기)
  - 2025-03-01 ~ 2025-03-05 (34일 주기)
  - 2025-04-04 ~ 2025-04-08 (34일 주기)
- **배란 테스트 기록**: 없음
- **배란일 직접 입력**: 없음
- **피임약 패키지 시작일**: 없음
- **오늘 날짜**: 2025-04-25 (지연 테스트 제외)
- **생리 주기 설정**: 
  - 평균 주기: 31일 (실제 계산: (25+34+34)/3 = 31)
  - 평균 기간: 5일 (실제 계산)
  - 주기 길이 범위: 25-34일
  - 수동 평균 주기: 28일
  - 수동 평균 기간: 5일
  - 자동 계산 사용: true
- **피임약 설정**:
  - 피임약으로 계산: false

**⚠️ 주요 차이점**: 불규칙한 주기로 평균 31일은 26-32일 범위 밖
- 34일 주기는 26-32일 범위를 벗어나므로 다른 공식 사용
- 배란기: 주기 길이 - 14일 (34일 기준: 20일차)
- 가임기: 배란기 ± 5일
- 자동 계산 모드 사용

---

## TC-04-01: 1일 조회 (마지막 생리 이후)
### 📌 테스트 목적
마지막 생리 이후 특정 날짜 1일만 조회할 때 불규칙 주기의 평균 계산이 정확한지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-25
  - 종료: 2025-04-25

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 없음 (조회 기간 내 생리 없음, 다음 예정일은 2025-05-05)
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 기간 내 배란기 없음)
- **가임기들**: 없음 (조회 기간 내 가임기 없음)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 1일 조회 시 해당 날짜만 반환되는가
- [ ] 불규칙 주기의 평균이 정확히 계산되는가 (31일)

---

## TC-04-02: 1주일 조회 (마지막 생리 이후)
### 📌 테스트 목적
마지막 생리 이후 1주일 기간 조회 시 불규칙 주기의 상태 변화가 정확히 표시되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-15
  - 종료: 2025-04-21

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 없음 (다음 예정일은 2025-05-05부터, 조회 범위 밖)
- **생리 지연일**: 없음
- **배란기들**: 
  - 2025-04-16 ~ 2025-04-18 (조회 범위 내 포함)
- **가임기들**: 
  - 2025-04-11 ~ 2025-04-22 (조회 범위와 부분 겹침, 04-15 ~ 04-21 겹침)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 가임기가 조회 기간에 부분적으로 포함되는가
- [ ] 배란기가 조회 범위 내에 정확히 표시되는가
- [ ] 평균 주기 31일로 계산되는가

---

## TC-04-03: 1개월 조회 (마지막 생리 이후)
### 📌 테스트 목적
마지막 생리(Period 4) 전체 주기를 조회하여 실제 생리, 배란기, 가임기가 모두 정확히 표시되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-04
  - 종료: 2025-04-27

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 없음 (다음 예정일 2025-05-05부터 시작, 조회 범위 밖)
- **생리 지연일**: 없음
- **배란기들**: 
  - 2025-04-16 ~ 2025-04-18 (생리 시작 13-15일차, 평균 주기 31일 기준)
- **가임기들**: 
  - 2025-04-11 ~ 2025-04-22 (생리 시작 8-19일차, 평균 주기 31일 기준)
- **주기**: 34일 (Period 4의 실제 주기, 03-01 → 04-04)

### 🔍 검증 포인트
- [ ] 생리 전체 주기의 배란기가 13-15일차로 계산되는가
- [ ] 생리 전체 주기의 가임기가 8-19일차로 계산되는가
- [ ] 불규칙 주기의 평균값으로 계산되는가

---

## TC-04-04: 1일 조회 (과거)
### 📌 테스트 목적
과거 기록된 주기의 배란기 중 특정 날짜를 조회할 때 배란기/가임기가 정확히 표시되는지 검증 (불규칙 주기)

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-03-11
  - 종료: 2025-03-11

### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (pk=3):**
- **실제 생리 기록**: 2025-03-01 ~ 2025-03-05 (세 번째 생리)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 없음
- **배란기들**: 없음 (2025-03-19 ~ 2025-03-21, 조회 범위 밖)
- **가임기들**: 없음 (2025-03-16 ~ 2025-03-24, 조회 범위 밖)
- **주기**: 34일

**주기 2 (pk=4):**
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (네 번째 생리)
- **생리 예정일들**: 없음
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 과거 실제 기록의 배란기가 13-15일차로 정확히 계산되는가
- [ ] 과거 실제 기록의 가임기가 8-19일차로 계산되는가
- [ ] 다음 주기 정보(pk=4)가 함께 반환되는가

---

## TC-04-05: 1주일 조회 (과거)
### 📌 테스트 목적
과거 기록된 주기의 배란기/가임기가 포함된 1주일 기간 조회 시 해당 주의 상태 변화가 정확히 표시되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-03-09
  - 종료: 2025-03-15

### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (pk=3):**
- **실제 생리 기록**: 2025-03-01 ~ 2025-03-05 (세 번째 생리)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 없음
- **배란기들**: 없음 (2025-03-19 ~ 2025-03-21, 조회 범위 밖)
- **가임기들**: 없음 (2025-03-16 ~ 2025-03-24, 조회 범위 밖)
- **주기**: 34일

**주기 2 (pk=4):**
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (네 번째 생리)
- **생리 예정일들**: 없음
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 과거 1주일 조회 시 배란기/가임기가 조회 범위 밖이면 표시되지 않는가
- [ ] 불규칙 주기의 평균값으로 계산되는가

---

## TC-04-06: 1개월 조회 (과거)
### 📌 테스트 목적
과거 기록된 Period 3 전체 주기를 조회할 때 생리일, 배란기, 가임기가 모두 정확히 표시되는지 검증 (불규칙 주기)

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-03-01
  - 종료: 2025-03-29

### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (pk=3):**
- **실제 생리 기록**: 2025-03-01 ~ 2025-03-05 (세 번째 생리)
- **생리 예정일들**: 없음 (Period 4는 실제 기록, 예정일이 아님)
- **생리 지연일**: 없음
- **배란기들**: 
  - 2025-03-19 ~ 2025-03-21 (생리 시작 13-15일차)
- **가임기들**: 
  - 2025-03-16 ~ 2025-03-24 (생리 시작 8-19일차)
- **주기**: 34일

**주기 2 (pk=4):**
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (네 번째 생리, 다음 주기 정보 제공)
- **생리 예정일들**: 없음 (조회 범위 밖)
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 과거 전체 주기 조회 시 생리일, 배란기, 가임기가 모두 표시되는가
- [ ] 불규칙 주기의 평균값(31일)으로 정확히 계산되는가

---

## TC-04-07: 생리 기간 경계 조회
### 📌 테스트 목적
조회 기간이 생리 종료일과 다음 생리 시작일에 걸쳐있을 때 두 주기가 모두 반환되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-01
  - 종료: 2025-04-06

### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (pk=3):**
- **실제 생리 기록**: 2025-03-01 ~ 2025-03-05 (세 번째 생리)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 34일 (Period 3의 실제 주기)

**주기 2 (pk=4):**
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (네 번째 생리, 조회 범위와 부분 겹침: 04-04 ~ 04-06)
- **생리 예정일들**: 없음
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 31일 (자동 계산 평균)

### 🔍 검증 포인트
- [ ] 주기 경계에서 두 주기가 정확히 반환되는가
- [ ] 기간 4의 생리일이 정확히 표시되는가
- [ ] 기간 3의 데이터는 조회 범위 밖이므로 비어있는가

---

## TC-04-08: 3개월 조회
### 📌 테스트 목적
장기간 조회 시 불규칙 주기의 예측이 평균값(31일)으로 반복되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-09
  - 종료: 2025-06-30

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 
  - 2025-05-05 ~ 2025-05-09 (31일 기준, 5일간)
  - 2025-06-05 ~ 2025-06-09
- **생리 지연일**: 없음
- **배란기들**: 
  - 2025-04-16 ~ 2025-04-18 (13-15일차)
  - 2025-05-17 ~ 2025-05-19
  - 2025-06-17 ~ 2025-06-19
- **가임기들**: 
  - 2025-04-11 ~ 2025-04-22 (8-19일차)
  - 2025-05-12 ~ 2025-05-23
  - 2025-06-12 ~ 2025-06-23
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 불규칙한 주기의 평균이 정확히 계산되는가 (31일)
- [ ] 평균 주기로 일정하게 반복 예측되는가
- [ ] Period 4만 반환되고 Period 3는 조회 범위 밖이므로 제외되는가
- [ ] 배란기가 매 주기마다 13-15일차로 계산되는가
- [ ] 가임기가 매 주기마다 8-19일차로 설정되는가
- [ ] 자동 계산 모드가 적용되는가

---

## TC-04-09: 생리 예정 기간 중 조회
### 📌 테스트 목적
조회 기간이 생리 예정 기간을 포함할 때 정확히 표시되는지 검증

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-05-05
  - 종료: 2025-05-09

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 
  - 2025-05-05 ~ 2025-05-09
- **생리 지연일**: 없음
- **배란기들**: 없음 (조회 기간 내 배란기 없음)
- **가임기들**: 없음 (조회 기간 내 가임기 없음)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 생리 예정일이 조회 기간에 정확히 포함되는가
- [ ] 생리 기간만 조회 시 배란기/가임기는 표시되지 않는가

---

## TC-04-10: 배란기 중 조회
### 📌 테스트 목적
조회 기간이 배란기를 포함할 때 정확히 표시되는지 검증 (불규칙 주기, 평균 공식 적용)

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-11
  - 종료: 2025-04-13

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 없음 (조회 기간 내 생리 없음)
- **생리 지연일**: 없음
- **배란기들**: 없음 (2025-04-16 ~ 2025-04-18, 조회 범위 밖)
- **가임기들**: 
  - 2025-04-11 ~ 2025-04-22 (조회 범위와 부분 겹침, 04-11 ~ 04-13 겹침)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 가임기가 조회 기간과 부분적으로 겹칠 때 정확히 표시되는가
- [ ] 배란기가 조회 범위 밖일 때 표시되지 않는가

---

## TC-04-11: 가임기 중 조회
### 📌 테스트 목적
조회 기간이 가임기를 포함할 때 정확히 표시되는지 검증 (불규칙 주기, 평균 공식 적용)

### 📝 입력 조건
- **조회 기간**: 
  - 시작: 2025-04-11
  - 종료: 2025-04-18

### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 예정일들**: 없음 (조회 기간 내 생리 없음)
- **생리 지연일**: 없음
- **배란기들**: 
  - 2025-04-16 ~ 2025-04-18 (조회 범위와 부분 겹침)
- **가임기들**: 
  - 2025-04-11 ~ 2025-04-22 (조회 범위와 부분 겹침)
- **주기**: 31일

### 🔍 검증 포인트
- [ ] 가임기가 평균 주기 기준 8-19일차로 정확히 계산되는가
- [ ] 배란기가 평균 주기 기준 13-15일차로 정확히 계산되는가
- [ ] 조회 범위와 가임기/배란기가 부분적으로 겹칠 때 올바르게 표시되는가

---

### TC-04-12: 생리 지연 1-7일 (예정일 뒤로 미룸)
#### 📌 테스트 목적
불규칙 주기에서 생리 예정일이 지나고 1-7일 지연되었을 때, 지연 기간이 표시되고 다음 예정일이 지연만큼 뒤로 미뤄지는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-04-05 ~ 2025-05-20
- **오늘 날짜**: 2025-05-08 (생리 예정일 05-05에서 4일 지연)

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리, 부분 포함)
- **생리 지연일**: 4일
- **지연 기간**: 2025-05-05 ~ 2025-05-08 (예정일부터 오늘까지)
- **생리 예정일들**: 2025-05-09 ~ 2025-05-13 (지연 다음날부터 5일간, 지연으로 밀린 예정일)
- **배란기들**: 2025-04-16 ~ 2025-04-18 (Period 4의 배란기)
- **가임기들**:
  - 2025-04-11 ~ 2025-04-22 (Period 4의 가임기, 부분 포함)
  - 2025-05-16 ~ 2025-05-27 (지연 4일 적용된 예측 주기의 가임기, 부분 포함)
- **주기**: 31일

#### 🔍 검증 포인트
- [ ] 생리 예정일이 지나고 1-7일 지연 시 지연 기간이 표시되는가
- [ ] 지연 기간이 예정일부터 오늘까지로 계산되는가
- [ ] 지연 당일부터 새로운 예정일이 시작되는가
- [ ] 4일 지연까지는 예정일이 뒤로 밀려서 표시되는가

---

### TC-04-13: 생리 지연 8일 이상 (예정일 표시 안 함, 병원 권장)
#### 📌 테스트 목적
불규칙 주기에서 생리 예정일이 지나고 8일 이상 지연되었을 때 예정일과 지연 기간을 표시하지 않는지 검증 (병원 진료 권장 상태)

#### 📝 입력 조건
- **조회 기간**: 2025-03-20 ~ 2025-06-30
- **오늘 날짜**: 2025-05-13 (생리 예정일 05-05에서 9일 지연)

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-04-04 ~ 2025-04-08 (pk=4, 마지막 생리)
- **생리 지연일**: 9일
- **지연 기간**: 2025-05-05 ~ 2025-05-13 (예정일 05-05부터 오늘 05-13까지 9일간)
- **생리 예정일들**: 없음 (8일 이상 지연 시 예정일 표시 안 함)
- **배란기들**: 2025-04-16 ~ 2025-04-18 (Period 4의 배란기, 조회 범위 내)
- **가임기들**: 2025-04-11 ~ 2025-04-22 (Period 4의 가임기, 조회 범위 내)
- **주기**: 31일

#### 🔍 검증 포인트
- [ ] 생리 예정일이 지나고 8일 이상 지연 시 지연 기간이 표시되는가
- [ ] 8일 이상 지연 시 생리 예정일을 표시하지 않는가
- [ ] delayTheDays는 9로 계산되고 delayDay도 9일간 표시되는가
- [ ] 사용자에게 병원 진료를 권장하는 상태임을 알 수 있는가
- [ ] `DayType.PERIOD_DELAYED_OVER` (8일 이상 지연) 상태로 표시되는가
- [ ] `SpecialCaseType.HOSPITAL_OVER_DELAY_8` 병원 권장 메시지가 있는가
