# 크나우스 오기노법 - 짧은 주기

## 📋 방법 개요
**적용 대상:** 25일 이하의 짧은 생리 주기

## 📐 계산 공식

### 기간 계산
| 구분 | 계산 방식 | 설명 |
|------|-----------|------|
| 🔴 **가임기 시작일** | 주기 - 19일 | 주기 길이 기반 (음수 시 0) |
| 🔴 **가임기 종료일** | 주기 - 11일 | 주기 길이 기반 |
| 🟠 **배란기 시작일** | 주기 - 16일 | 주기 길이 기반 (음수 시 0) |
| 🟠 **배란기 종료일** | 주기 - 14일 | 주기 길이 기반 |

### 신뢰도
- **실패 확률:** 9%
- **특징:** 짧은 주기에서 음수 방어 로직 적용 (`start < 0`이면 `start = 0`)

## 📌 공통 입력 조건

모든 테스트 케이스는 동일한 입력 조건을 사용합니다:

- 생리 기록:
  - 2025-01-01 ~ 2025-01-05 (pk=1, 주기 22일)
  - 2025-01-23 ~ 2025-01-27 (pk=2, 주기 18일)
  - 2025-02-10 ~ 2025-02-14 (pk=3, 주기 22일)
- 배란 테스트 기록: 없음
- 배란일 직접 입력: 없음
- 피임약 패키지 시작일: 없음
- 오늘 날짜: 2025-02-20
- 생리 주기 설정:
  - 평균 주기: 22일 (실제 계산) (20일 미만, 70일 초과 주기는 제외)
  - 평균 기간: 5일 (실제 계산)
  - 수동 평균 주기: 28일
  - 수동 평균 기간: 5일
  - 자동 계산 사용: true
- 피임약 설정:
  - 피임약으로 계산: false

---

## 그룹 1: 마지막 생리 이후 조회 (Period 3 기준)

### TC-02-01: 1일 조회 (마지막 생리 이후)
#### 📌 테스트 목적
마지막 생리 이후 특정 날짜의 가임기 상태를 정확히 검증

#### 📝 입력 조건
- 조회 기간: 2025-02-20 ~ 2025-02-20

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-02-13 ~ 2025-02-21]
- 배란기들: []
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-02: 1주일 조회 (마지막 생리 이후)
#### 📌 테스트 목적
마지막 생리 이후 1주일 조회 시 배란기가 정확히 표시되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-02-16 ~ 2025-02-22

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-02-13 ~ 2025-02-21]
- 배란기들: [2025-02-16 ~ 2025-02-18]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-03: 1개월 조회 (마지막 생리 이후)
#### 📌 테스트 목적
마지막 생리(Period 3) 전체 주기를 조회하여 실제 생리, 배란기, 가임기, 다음 예정일이 모두 정확히 표시되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-02-10 ~ 2025-03-09

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-04 ~ 2025-03-08]
- 가임기들: [2025-02-13 ~ 2025-02-21, 2025-03-07 ~ 2025-03-15]
- 배란기들: [2025-02-16 ~ 2025-02-18]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

## 그룹 2: 과거 기록 중심 (생리 주기 사이 - Period 2)

### TC-02-04: 1일 조회 (과거)
#### 📌 테스트 목적
Period 2와 Period 3 사이 배란기 특정 날짜를 정확히 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-23 ~ 2025-01-23

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=2):**
- pk: "2"
- 실제 생리 기록: 2025-01-23 ~ 2025-01-27
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: []
- 배란기들: []
- 주기: 18
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-05: 1주일 조회 (과거)
#### 📌 테스트 목적
Period 2의 배란기/가임기 구간을 1주일 조회하여 정확히 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-26 ~ 2025-02-01

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=2):**
- pk: "2"
- 실제 생리 기록: 2025-01-23 ~ 2025-01-27
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-23 ~ 2025-01-30]
- 배란기들: [2025-01-25 ~ 2025-01-27]
- 주기: 18
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-06: 1개월 조회 (과거)
#### 📌 테스트 목적
Period 1 주기를 조회하여 실제 생리, 배란기, 가임기가 모두 정확히 계산되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-01 ~ 2025-01-22

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-04 ~ 2025-01-12]
- 배란기들: [2025-01-07 ~ 2025-01-09]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

## 그룹 3: 장기 조회 & 특수 구간

### TC-02-07: 3개월 조회
#### 📌 테스트 목적
장기간 조회 시 여러 주기의 예측이 반복적으로 정확한지 검증

#### 📝 입력 조건
- 조회 기간: 2025-02-10 ~ 2025-05-09

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-04 ~ 2025-03-08, 2025-03-26 ~ 2025-03-30, 2025-04-17 ~ 2025-04-21, 2025-05-09 ~ 2025-05-13]
- 가임기들: [2025-02-13 ~ 2025-02-21, 2025-03-07 ~ 2025-03-15, 2025-03-29 ~ 2025-04-06, 2025-04-20 ~ 2025-04-28]
- 배란기들: [2025-02-16 ~ 2025-02-18, 2025-03-10 ~ 2025-03-12, 2025-04-01 ~ 2025-04-03, 2025-04-23 ~ 2025-04-25]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-08: 생리 기간 경계 조회
#### 📌 테스트 목적
전체 생리 기록 조회 및 미래 예측 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-07 ~ 2025-04-06

#### ✅ 예상 결과
**주기 개수: 3개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-04 ~ 2025-01-12]
- 배란기들: [2025-01-07 ~ 2025-01-09]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

**주기 2 (pk=2):**
- pk: "2"
- 실제 생리 기록: 2025-01-23 ~ 2025-01-27
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-23 ~ 2025-01-30]
- 배란기들: [2025-01-25 ~ 2025-01-27]
- 주기: 18
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

**주기 3 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-04 ~ 2025-03-08, 2025-03-26 ~ 2025-03-30]
- 가임기들: [2025-02-13 ~ 2025-02-21, 2025-03-07 ~ 2025-03-15, 2025-03-29 ~ 2025-04-06]
- 배란기들: [2025-02-16 ~ 2025-02-18, 2025-03-10 ~ 2025-03-12, 2025-04-01 ~ 2025-04-03]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null
---

### TC-02-09: 생리 기간 경계 조회
#### 📌 테스트 목적
과거 생리 기록만 조회 (미래 예측 없음)

#### 📝 입력 조건
- 조회 기간: 2025-01-01 ~ 2025-02-09

#### ✅ 예상 결과
**주기 개수: 2개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-04 ~ 2025-01-12]
- 배란기들: [2025-01-07 ~ 2025-01-09]
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

**주기 2 (pk=2):**
- pk: "2"
- 실제 생리 기록: 2025-01-23 ~ 2025-01-27
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-23 ~ 2025-01-30]
- 배란기들: [2025-01-25 ~ 2025-01-27]
- 주기: 18
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

## 그룹 4: 생리 지연 케이스

### TC-02-10: 생리 지연 1-7일 (예정일 뒤로 미룸)
#### 📌 테스트 목적
생리 예정일이 지나고 1-7일 지연되었을 때 지연 기간이 표시되고, 다음 예정일이 지연 다음날부터 시작하는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-09 ~ 2025-03-15
- 오늘 날짜: 2025-03-10 (생리 예정일 03-04으로부터 7일 지연)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 7일
- 지연 기간: [2025-03-04 ~ 2025-03-10]
- 생리 예정일들: [2025-03-11 ~ 2025-03-15]
- 가임기들: [2025-03-14 ~ 2025-03-22]
- 배란기들: []
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-02-11: 생리 지연 8일 이상 (예정일 표시 안 함, 병원 권장)
#### 📌 테스트 목적
생리 예정일이 지나고 8일 이상 지연되었을 때 예정일과 지연 기간을 표시하지 않는지 검증 (병원 진료 권장 상태)

#### 📝 입력 조건
- 조회 기간: 2025-03-09 ~ 2025-03-15
- 오늘 날짜: 2025-03-11 (생리 예정일 03-04으로부터 8일 지연)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-02-10 ~ 2025-02-14
- 지연 일수: 8일
- 지연 기간: [2025-03-04 ~ 2025-03-11]
- 생리 예정일들: []
- 가임기들: []
- 배란기들: []
- 주기: 22
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null
