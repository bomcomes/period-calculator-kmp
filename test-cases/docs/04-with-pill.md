# 피임약 복용 테스트 케이스

## 📌 핵심 개념

### 예정일 계산
- **공식**: 피임약 시작일 + 복용일 + 2 (휴약 3일째부터 생리 예정)
- **21일 복용 예**: 03-01 + 21 + 2 = **03-24** 시작

### 5일 규칙 (중요!)
피임약을 **생리 예정일 5일 전에 복용**해야 피임약 기반 계산 적용:
- **5일 전 또는 그 이전**: 피임약 기반 예정일, 배란기/가임기 숨김
- **5일 이후 (4일 전 이하)**: 일반 주기 계산, 배란기/가임기 노출

### 연속 복용 (휴약기 0일)
- 예정일 없음, 배란기/가임기 숨김, 지연 개념 없음

---

## 📌 공통 입력 조건

모든 테스트 케이스는 동일한 입력 조건을 사용합니다:

- 생리 기록:
  - 2025-01-01 ~ 2025-01-05 (pk=1)
  - 2025-02-01 ~ 2025-02-05 (pk=2)
  - 2025-03-01 ~ 2025-03-05 (pk=3)
- 배란 테스트 기록: 없음
- 배란일 직접 입력: 없음
- 오늘 날짜: 2025-03-15
- 생리 주기 설정:
  - 평균 주기: 30일 (실제 계산)
  - 평균 기간: 5일 (실제 계산)
  - 수동 평균 주기: 28일
  - 수동 평균 기간: 5일
  - 자동 계산 사용: true
- 피임약 설정:
  - 피임약으로 계산: false
  - 피임약 개수: 21
  - 휴약 기간: 7

---

## 그룹 1: 피임약 복용 케이스

### TC-04-01-01: 기본 복용 (1개월)

#### 📌 테스트 목적
피임약 패키지 전체 주기 조회 시 정확히 계산되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-03-30
- 피임약 시작: 2025-03-01
- 오늘 날짜: 2025-03-15

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-24 ~ 2025-03-28]
- 가임기들: []
- 배란기들: []
- 주기: 28
- 배란일 사용자 입력: false
- 피임약 기준 주기: 23
- 남은 휴약일: null

---

### TC-04-01-02: 휴약기 0일 (연속 복용)

#### 📌 테스트 목적
휴약 없이 연속 복용 시 예정일이 없는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-03-30
- 피임약 시작: 2025-03-01
- 오늘 날짜: 2025-03-15
- 휴약 기간: 0일

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: []
- 배란기들: []
- 주기: null
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-04-01-03: 여러 패키지

#### 📌 테스트 목적
3개월 연속 패키지 - 마지막 패키지 예정일만 반환되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-03-30
- 피임약 패키지:
  - 1차: 2025-01-01
  - 2차: 2025-02-01
  - 3차: 2025-03-01
- 생리 주기 설정:
  - 평균 주기: 28일 (실제 계산)
  - 평균 기간: 5일 (실제 계산)
  - 수동 평균 주기: 28일
  - 수동 평균 기간: 5일
  - 자동 계산 사용: true

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-24 ~ 2025-03-28]
- 가임기들: []
- 배란기들: []
- 주기: 28
- 배란일 사용자 입력: false
- 피임약 기준 주기: 23
- 남은 휴약일: null

---

### TC-04-01-04: 지연 1-7일

#### 📌 테스트 목적
피임약 복용 중 생리 지연 시 정확히 계산되는지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-30 ~ 2025-04-04
- 피임약 시작: 2025-03-01
- 오늘 날짜: 2025-03-30 (생리 예정일 03-24으로부터 7일 지연)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 7일
- 지연 기간: [2025-03-24 ~ 2025-03-30]
- 생리 예정일들: [2025-03-31 ~ 2025-04-04]
- 가임기들: []
- 배란기들: []
- 주기: 28
- 배란일 사용자 입력: false
- 피임약 기준 주기: 23
- 남은 휴약일: null

---

### TC-04-01-05: 지연 8일 이상

#### 📌 테스트 목적
8일 이상 지연 시 예정일 표시 안 함 검증 (병원 진료 권장)

#### 📝 입력 조건
- 조회 기간: 2025-03-30 ~ 2025-04-04
- 피임약 시작: 2025-03-01
- 오늘 날짜: 2025-03-31 (생리 예정일 03-24으로부터 8일 지연)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 8일
- 지연 기간: [2025-03-24 ~ 2025-03-31]
- 생리 예정일들: []
- 가임기들: []
- 배란기들: []
- 주기: 28
- 배란일 사용자 입력: false
- 피임약 기준 주기: 23
- 남은 휴약일: null

---

### TC-04-01-06: 5일 전 복용 (배란기 숨김)

#### 📌 테스트 목적
피임약을 예정일 5일 전에 복용 시 피임약 기반 계산 적용 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-04-30
- 피임약 시작: 2025-03-26 (예정일 5일 전)
- 오늘 날짜: 2025-03-27

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-04-18 ~ 2025-04-22]
- 가임기들: []
- 배란기들: []
- 주기: 28
- 배란일 사용자 입력: false
- 피임약 기준 주기: 48
- 남은 휴약일: null

---

### TC-04-01-07: 5일 이후 복용 (배란기 노출)

#### 📌 테스트 목적
피임약을 예정일 5일 전 이후에 복용 시 일반 주기 계산 유지 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-04-30
- 피임약 시작: 2025-03-27 (예정일 4일 전)
- 오늘 날짜: 2025-03-27

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-31 ~ 2025-04-04, 2025-04-30 ~ 2025-05-04]
- 가임기들: [2025-03-09 ~ 2025-03-19, 2025-04-07 ~ 2025-04-18]
- 배란기들: [2025-03-13 ~ 2025-03-15, 2025-04-12 ~ 2025-04-14]
- 주기: 30
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-04-01-08: 생리 기간 사이 - 5일 전 복용 (배란기 숨김)

#### 📌 테스트 목적
첫 생리 후 피임약 복용, 두 번째 생리 기간에서 5일 규칙 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-01 ~ 2025-01-31
- 피임약 시작: 2025-01-27 (다음 생리 5일 전)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: []
- 배란기들: []
- 주기: 31
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-04-01-09: 생리 기간 사이 - 5일 이후 복용 (배란기 노출)

#### 📌 테스트 목적
생리 후 늦게 피임약 시작 시 배란기/가임기 노출 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-01 ~ 2025-01-31
- 피임약 시작: 2025-01-28 (다음 생리 4일 전)

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-08 ~ 2025-01-19]
- 배란기들: [2025-01-13 ~ 2025-01-15]
- 주기: 31
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-04-01-10: 피임약 기록 반영 중단 - 마지막 생리 기록 이후

#### 📌 테스트 목적
피임약 계산 적용 무시 설정 시 일반 주기 복귀 검증

#### 📝 입력 조건
- 조회 기간: 2025-03-01 ~ 2025-03-31
- 피임약 시작: 2025-03-01
- 피임약 설정: isCalculatingWithPill = false

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=3):**
- pk: "3"
- 실제 생리 기록: 2025-03-01 ~ 2025-03-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: [2025-03-31 ~ 2025-04-04]
- 가임기들: [2025-03-08 ~ 2025-03-19]
- 배란기들: [2025-03-13 ~ 2025-03-15]
- 주기: 30
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null

---

### TC-04-01-11: 피임약 기록 반영 중단 - 생리 기록 사이

#### 📌 테스트 목적
피임약 계산 적용 무시 설정 시 일반 주기 복귀 검증

#### 📝 입력 조건
- 조회 기간: 2025-01-01 ~ 2025-01-31
- 피임약 시작: 2025-01-01
- 피임약 설정: isCalculatingWithPill = false

#### ✅ 예상 결과
**주기 개수: 1개**

**주기 1 (pk=1):**
- pk: "1"
- 실제 생리 기록: 2025-01-01 ~ 2025-01-05
- 지연 일수: 0일
- 지연 기간: null
- 생리 예정일들: []
- 가임기들: [2025-01-08 ~ 2025-01-19]
- 배란기들: [2025-01-13 ~ 2025-01-15]
- 주기: 31
- 배란일 사용자 입력: false
- 피임약 기준 주기: null
- 남은 휴약일: null
