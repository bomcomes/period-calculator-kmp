# 피임약 복용 테스트 케이스

## 📌 공통 입력 조건

모든 테스트 케이스는 동일한 입력 조건을 사용합니다 (특별한 언급이 없는 한):

- **생리 기록**:
  - Period 1: 2024-12-01 ~ 2024-12-05 (5일간, pk=1)
  - Period 2: 2024-12-29 ~ 2025-01-02 (5일간, pk=2)
  - Period 3: 2025-01-26 ~ 2025-01-30 (5일간, pk=3)
  - Period 4: 2025-02-23 ~ 2025-02-27 (5일간, pk=4)
- **배란 테스트 기록**: 없음
- **배란일 직접 입력**: 없음
- **피임약 패키지 시작일**: 2025-03-01 (마지막 생리 종료 후)
- **오늘 날짜**: 2025-03-25 (지연 테스트 제외)
- **생리 주기 설정**:
  - 수동 평균 주기: 28일
  - 수동 평균 기간: 5일
  - 자동 계산 사용: false
- **피임약 설정** (기본):
  - 피임약으로 계산: true
  - 복용일: 21일
  - 휴약일: 7일
  - 총 주기: 28일

**⚠️ 주요 차이점**: 피임약 복용 시
- 주기 = 복용일 + 휴약일 (고정)
- 휴약기 = 소퇴성 출혈 예상 기간
- 배란기/가임기 없음 (호르몬으로 배란 억제)
- 패키지 시작일부터 새로운 주기 시작

---

## 그룹 1: 현재 패키지 조회 (마지막 패키지 시작 이후)

### TC-05-01: 1일 조회
#### 📌 테스트 목적
특정 날짜 1일만 조회할 때 피임약 복용 상태가 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-15 (1일)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 없음 (다음 휴약기는 03-22부터)
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**: 복용 15일차 (03-01부터 복용)
- **주기**: 28일 (21일 복용 + 7일 휴약)

#### 🔍 검증 포인트
- [ ] 피임약 복용 중 배란기/가임기가 없는가
- [ ] 복용일차가 정확히 계산되는가
- [ ] DayType.PILL_ACTIVE로 표시되는가

---

### TC-05-02: 1주일 조회
#### 📌 테스트 목적
1주일 기간 조회 시 피임약 복용 상태 변화가 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-19 ~ 2025-03-25 (7일)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 2025-03-22 ~ 2025-03-28 (조회 기간과 부분 겹침)
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**:
  - 03-19 ~ 03-21: 복용 19-21일차
  - 03-22 ~ 03-25: 휴약 1-4일차
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 복용 기간에서 휴약 기간으로 전환이 표시되는가
- [ ] 휴약기간이 소퇴성 출혈 예정으로 표시되는가
- [ ] DayType이 PILL_ACTIVE에서 PILL_PLACEBO로 변경되는가

---

### TC-05-03: 1개월 조회
#### 📌 테스트 목적
피임약 패키지 전체 주기 조회 시 복용기간과 휴약기간이 모두 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-01 ~ 2025-03-28 (28일, 패키지 전체)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 2025-03-22 ~ 2025-03-28
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**:
  - 03-01 ~ 03-21: 복용 기간 (21일)
  - 03-22 ~ 03-28: 휴약 기간 (7일)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 패키지 전체 주기가 정확히 28일인가
- [ ] 복용 21일, 휴약 7일로 구분되는가
- [ ] 패키지 시작일부터 계산이 시작되는가

---

## 그룹 2: 과거 패키지 조회

### TC-05-04: 1일 조회 (과거)
#### 📌 테스트 목적
피임약 시작 전 과거 날짜 조회 시 일반 주기 계산이 적용되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-02-10 (1일)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-01-26 ~ 2025-01-30 (pk=3, 이전 생리)
- **생리 예정일**: 없음 (실제 Period 4가 02-23에 발생)
- **생리 지연일**: 없음
- **배란기**: 2025-02-09 ~ 2025-02-11 (조회일 포함)
- **가임기**: 2025-02-04 ~ 2025-02-15 (조회일 포함)
- **주기**: 28일 (일반 주기)

#### 🔍 검증 포인트
- [ ] 피임약 시작 전에는 일반 주기 계산이 적용되는가
- [ ] 배란기와 가임기가 정상적으로 표시되는가
- [ ] DayType.OVULATION으로 표시되는가

---

### TC-05-05: 1주일 조회 (과거)
#### 📌 테스트 목적
피임약 시작 전 1주일 조회 시 일반 주기의 배란기/가임기가 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-02-08 ~ 2025-02-14 (7일)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-01-26 ~ 2025-01-30 (pk=3, 이전 생리)
- **생리 예정일**: 없음 (실제 Period 4가 02-23에 발생)
- **생리 지연일**: 없음
- **배란기**: 2025-02-09 ~ 2025-02-11
- **가임기**: 2025-02-04 ~ 2025-02-15 (조회 기간과 겹침)
- **주기**: 28일 (일반 주기)

#### 🔍 검증 포인트
- [ ] 피임약 시작 전 일반 주기가 적용되는가
- [ ] 배란기와 가임기가 정확히 표시되는가

---

### TC-05-06: 1개월 조회 (과거)
#### 📌 테스트 목적
피임약 시작 전 전체 주기 조회 시 일반 생리 주기가 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-01-26 ~ 2025-02-22 (28일)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-01-26 ~ 2025-01-30 (pk=3)
- **생리 예정일**: 2025-02-23 ~ 2025-02-27 (실제로 발생함, pk=4)
- **생리 지연일**: 없음
- **배란기**: 2025-02-09 ~ 2025-02-11
- **가임기**: 2025-02-04 ~ 2025-02-15
- **주기**: 28일 (일반 주기)

#### 🔍 검증 포인트
- [ ] 피임약 시작 전 전체 주기가 정상적으로 표시되는가
- [ ] 예정일이 실제 생리(pk=4)와 일치하는가

---

## 그룹 3: 장기 조회 및 특수 경계

### TC-05-07: 패키지 경계 조회
#### 📌 테스트 목적
피임약 시작일 전후 경계를 포함한 조회 시 일반 주기와 피임약 주기가 정확히 구분되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-02-26 ~ 2025-03-04 (7일, 경계 포함)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (pk=4, 일반 주기):**
- **실제 생리 기록**: 2025-02-26 ~ 2025-02-27 (조회 기간 내 부분)
- **배란기**: 없음 (조회 범위 밖)
- **가임기**: 없음 (조회 범위 밖)
- **주기**: 28일

**주기 2 (피임약 주기):**
- **패키지 시작**: 2025-03-01
- **복용 상태**: 03-01 ~ 03-04: 복용 1-4일차
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 경계에서 일반 주기와 피임약 주기가 구분되는가
- [ ] 03-01부터 피임약 계산이 시작되는가
- [ ] 두 주기가 모두 반환되는가

---

### TC-05-08: 3개월 조회
#### 📌 테스트 목적
장기간 조회 시 피임약 패키지 주기가 일정하게 반복되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-01 ~ 2025-05-31 (3개월)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**:
  - 2025-03-22 ~ 2025-03-28 (패키지 1)
  - 2025-04-19 ~ 2025-04-25 (패키지 2)
  - 2025-05-17 ~ 2025-05-23 (패키지 3)
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **주기**: 28일 (모든 패키지)

#### 🔍 검증 포인트
- [ ] 3개의 패키지 주기가 정확히 28일씩 반복되는가
- [ ] 휴약기가 매 패키지마다 7일씩 표시되는가
- [ ] 패키지 간 연속성이 유지되는가

---

## 그룹 4: 특정 기간 타입 조회

### TC-05-09: 휴약기간 중 조회
#### 📌 테스트 목적
휴약기간(소퇴성 출혈 기간) 조회 시 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-22 ~ 2025-03-28 (7일, 휴약기 전체)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 2025-03-22 ~ 2025-03-28
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**: 휴약 1-7일차
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 휴약기간이 소퇴성 출혈 예정으로 표시되는가
- [ ] DayType.PILL_PLACEBO로 표시되는가
- [ ] 7일간 정확히 표시되는가

---

### TC-05-10: 복용 초반 조회
#### 📌 테스트 목적
패키지 시작 초반 복용 기간 조회 시 상태가 정확한지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-01 ~ 2025-03-07 (7일, 복용 1-7일차)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 없음 (조회 범위 밖)
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**: 복용 1-7일차
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 패키지 시작일부터 복용일이 계산되는가
- [ ] DayType.PILL_ACTIVE로 표시되는가
- [ ] 복용 초반에도 배란/가임기가 없는가

---

### TC-05-11: 복용 후반 조회
#### 📌 테스트 목적
패키지 복용 후반 기간 조회 시 휴약기 전환 직전 상태가 정확한지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-15 ~ 2025-03-21 (7일, 복용 15-21일차)
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈 예정**: 없음 (03-22부터 시작)
- **생리 지연일**: 없음
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)
- **복용 상태**: 복용 15-21일차
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 복용 마지막 날(21일차)이 정확히 표시되는가
- [ ] 휴약기 직전까지 PILL_ACTIVE 상태인가
- [ ] 다음 휴약기 예정이 표시되는가

---

## 그룹 5: 패키지 시작 지연

### TC-05-12: 패키지 시작 1-7일 지연
#### 📌 테스트 목적
피임약 패키지 시작이 1-7일 지연되었을 때 주기 계산이 정확한지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-20 ~ 2025-04-30
- **오늘 날짜**: 2025-04-02 (다음 패키지 시작 예정일 03-29에서 4일 지연)
- **패키지 시작 지연**: 4일

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈**: 2025-03-22 ~ 2025-03-28 (첫 번째 패키지)
- **패키지 지연일**: 4일
- **지연 기간**: 2025-03-29 ~ 2025-04-01 (4일간)
- **다음 패키지 시작**: 2025-04-02 (지연 후 시작)
- **다음 휴약기 예정**: 2025-04-23 ~ 2025-04-29 (지연된 패키지 기준)
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)

#### 🔍 검증 포인트
- [ ] 패키지 시작 지연이 표시되는가
- [ ] 지연 후 새 패키지 주기가 재계산되는가
- [ ] 지연 기간 동안 상태가 명확한가

---

### TC-05-13: 패키지 시작 8일 이상 지연
#### 📌 테스트 목적
피임약 패키지 시작이 8일 이상 지연되었을 때 보호 효과 경고가 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-20 ~ 2025-04-30
- **오늘 날짜**: 2025-04-07 (다음 패키지 시작 예정일 03-29에서 9일 지연)
- **패키지 시작 지연**: 9일

#### ✅ 예상 결과
- **실제 생리 기록**: 2025-02-23 ~ 2025-02-27 (pk=4, 마지막 생리)
- **휴약기 출혈**: 2025-03-22 ~ 2025-03-28 (첫 번째 패키지)
- **패키지 지연일**: 9일
- **지연 기간**: 2025-03-29 ~ 2025-04-06 (9일간)
- **다음 패키지**: 시작하지 않음
- **경고**: 피임 효과 감소 경고
- **배란기**: 가능성 있음 (보호 효과 감소)
- **가임기**: 가능성 있음 (보호 효과 감소)

#### 🔍 검증 포인트
- [ ] 8일 이상 지연 시 경고가 표시되는가
- [ ] 피임 효과 감소 안내가 있는가
- [ ] SpecialCaseType.PILL_DELAY_WARNING이 표시되는가
- [ ] 추가 피임법 권고가 있는가

---

## 그룹 6: 다양한 피임약 구성

### TC-05-14: 24/4 구성 (야즈 타입)
#### 📌 테스트 목적
24일 복용/4일 휴약 구성의 피임약 주기가 정확히 계산되는지 검증

#### 📝 입력 조건
- **피임약 설정**: 복용 24일, 휴약 4일 (총 28일)
- **조회 기간**: 2025-03-01 ~ 2025-03-31
- **패키지 시작일**: 2025-03-01

#### ✅ 예상 결과
- **복용 기간**: 2025-03-01 ~ 2025-03-24 (24일)
- **휴약기 출혈 예정**: 2025-03-25 ~ 2025-03-28 (4일)
- **다음 패키지 시작**: 2025-03-29
- **배란기**: 없음
- **가임기**: 없음
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 24일 복용이 정확히 계산되는가
- [ ] 4일 휴약이 정확히 표시되는가
- [ ] 총 주기가 28일인가

---

### TC-05-15: 21/2 구성 (단축 휴약)
#### 📌 테스트 목적
21일 복용/2일 휴약 구성의 단축 주기가 정확히 계산되는지 검증

#### 📝 입력 조건
- **피임약 설정**: 복용 21일, 휴약 2일 (총 23일)
- **조회 기간**: 2025-03-01 ~ 2025-04-30
- **패키지 시작일**: 2025-03-01

#### ✅ 예상 결과
- **패키지 1**:
  - 복용: 03-01 ~ 03-21 (21일)
  - 휴약: 03-22 ~ 03-23 (2일)
- **패키지 2**:
  - 복용: 03-24 ~ 04-13 (21일)
  - 휴약: 04-14 ~ 04-15 (2일)
- **패키지 3**:
  - 복용: 04-16 ~ 05-06 (조회 범위 일부)
- **주기**: 23일

#### 🔍 검증 포인트
- [ ] 23일 주기가 정확히 반복되는가
- [ ] 2일 휴약이 정확히 표시되는가
- [ ] 패키지 간 연속성이 유지되는가

---

### TC-05-16: 28/0 구성 (연속 복용)
#### 📌 테스트 목적
28일 연속 복용(휴약 없음) 구성이 정확히 계산되는지 검증

#### 📝 입력 조건
- **피임약 설정**: 복용 28일, 휴약 0일 (연속 복용)
- **조회 기간**: 2025-03-01 ~ 2025-04-30
- **패키지 시작일**: 2025-03-01

#### ✅ 예상 결과
- **패키지 1**: 03-01 ~ 03-28 (28일 복용)
- **패키지 2**: 03-29 ~ 04-25 (28일 복용)
- **패키지 3**: 04-26 ~ (계속)
- **휴약기 출혈**: 없음 (연속 복용)
- **배란기**: 없음
- **가임기**: 없음
- **주기**: 28일 (휴약 없음)

#### 🔍 검증 포인트
- [ ] 휴약기 없이 연속 복용되는가
- [ ] 소퇴성 출혈 예정이 없는가
- [ ] DayType.PILL_ACTIVE만 표시되는가
- [ ] 패키지가 바로 이어지는가

---

### TC-05-17: 35/7 구성 (최대 복용)
#### 📌 테스트 목적
35일 복용/7일 휴약의 장기 주기가 정확히 계산되는지 검증

#### 📝 입력 조건
- **피임약 설정**: 복용 35일, 휴약 7일 (총 42일)
- **조회 기간**: 2025-03-01 ~ 2025-05-31
- **패키지 시작일**: 2025-03-01

#### ✅ 예상 결과
- **패키지 1**:
  - 복용: 03-01 ~ 04-04 (35일)
  - 휴약: 04-05 ~ 04-11 (7일)
- **패키지 2**:
  - 복용: 04-12 ~ 05-16 (35일)
  - 휴약: 05-17 ~ 05-23 (7일)
- **주기**: 42일

#### 🔍 검증 포인트
- [ ] 35일 복용이 정확히 계산되는가
- [ ] 42일 주기가 정확히 표시되는가
- [ ] 장기 주기에서도 계산이 정확한가

---

### TC-05-18: 20/7 구성 (최소 복용)
#### 📌 테스트 목적
20일 복용/7일 휴약의 최소 복용 구성이 정확히 계산되는지 검증

#### 📝 입력 조건
- **피임약 설정**: 복용 20일, 휴약 7일 (총 27일)
- **조회 기간**: 2025-03-01 ~ 2025-04-30
- **패키지 시작일**: 2025-03-01

#### ✅ 예상 결과
- **패키지 1**:
  - 복용: 03-01 ~ 03-20 (20일)
  - 휴약: 03-21 ~ 03-27 (7일)
- **패키지 2**:
  - 복용: 03-28 ~ 04-16 (20일)
  - 휴약: 04-17 ~ 04-23 (7일)
- **주기**: 27일

#### 🔍 검증 포인트
- [ ] 20일 최소 복용이 정확히 계산되는가
- [ ] 27일 주기가 정확히 반복되는가
- [ ] 복용 기간이 짧아도 피임 효과가 유지되는가

---

### TC-05-19: 일반 주기에서 피임약 전환
#### 📌 테스트 목적
일반 생리 주기에서 피임약 복용으로 전환 시 계산이 정확한지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-02-20 ~ 2025-03-31
- **피임약 시작일**: 2025-03-01 (생리 종료 후 시작)
- **이전 주기**: 일반 28일 주기

#### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (일반 주기):**
- **실제 생리**: 2025-02-23 ~ 2025-02-27 (pk=4)
- **배란기**: 없음 (조회 범위 일부)
- **가임기**: 없음 (조회 범위 일부)

**주기 2 (피임약 주기):**
- **패키지 시작**: 2025-03-01
- **복용 기간**: 03-01 ~ 03-21
- **휴약 예정**: 03-22 ~ 03-28
- **배란기**: 없음 (피임약 복용 중)
- **가임기**: 없음 (피임약 복용 중)

#### 🔍 검증 포인트
- [ ] 전환 시점이 명확히 구분되는가
- [ ] 일반 주기와 피임약 주기가 각각 계산되는가
- [ ] 03-01부터 피임 효과가 시작되는가

---

### TC-05-20: 피임약 중단 후 조회
#### 📌 테스트 목적
피임약 복용 중단 후 일반 주기로 복귀 시 계산이 정확한지 검증

#### 📝 입력 조건
- **조회 기간**: 2025-03-15 ~ 2025-04-30
- **피임약 중단일**: 2025-03-21 (복용 21일 완료 후 중단)
- **중단 후 첫 생리**: 예상 2025-03-22 ~ 2025-03-28

#### ✅ 예상 결과

**주기 개수: 2개**

**주기 1 (마지막 피임약 주기):**
- **복용 기간**: 03-15 ~ 03-21 (조회 범위 내 일부)
- **휴약기 출혈**: 03-22 ~ 03-28 (중단 후 소퇴성 출혈)

**주기 2 (일반 주기 복귀):**
- **예상 생리**: 04-19 ~ 04-23 (28일 후)
- **배란기**: 04-05 ~ 04-07 (정상 배란 복귀 가능)
- **가임기**: 03-31 ~ 04-11 (정상 가임기 복귀)
- **주의**: 중단 후 주기 불규칙 가능

#### 🔍 검증 포인트
- [ ] 중단 후 소퇴성 출혈이 표시되는가
- [ ] 일반 주기로 복귀가 표시되는가
- [ ] 배란/가임기가 다시 계산되는가
- [ ] 중단 후 주기 불규칙 경고가 있는가

---

## 요약

**총 20개 테스트 케이스**
- 그룹 1 (현재 패키지): TC-05-01 ~ TC-05-03
- 그룹 2 (과거 패키지): TC-05-04 ~ TC-05-06
- 그룹 3 (장기/경계): TC-05-07 ~ TC-05-08
- 그룹 4 (기간 타입): TC-05-09 ~ TC-05-11
- 그룹 5 (패키지 지연): TC-05-12 ~ TC-05-13
- 그룹 6 (다양한 구성): TC-05-14 ~ TC-05-20

**다양한 피임약 구성 테스트**:
- 21/7 (기본)
- 24/4 (야즈)
- 21/2 (단축)
- 28/0 (연속)
- 35/7 (최대)
- 20/7 (최소)
- 전환 시나리오