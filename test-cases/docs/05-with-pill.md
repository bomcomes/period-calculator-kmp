# 피임약 복용 테스트 케이스

## 📌 공통 입력 조건

### 생리 기록
- **Period 1**: 2024-12-01 ~ 2024-12-05 (5일간, pk=1)
- **Period 2**: 2024-12-29 ~ 2025-01-02 (5일간, pk=2)
- **Period 3**: 2025-01-26 ~ 2025-01-30 (5일간, pk=3)
- **Period 4**: 2025-02-23 ~ 2025-02-27 (5일간, pk=4)

### 배란 테스트 기록
- 없음

### 배란일 직접 입력
- 없음

### 피임약 패키지 시작일
- **2025-03-01** (마지막 생리 종료 후)

### 오늘 날짜
- **2025-03-23** (기본, 예정일 03-24 이전)

### 예정일 계산
- **계산식**: 피임약 시작일 + 복용일 + 2 (휴약 3일째부터 생리 예정)
- **21일 복용 예**: 03-01 + 21 + 2 = **03-24** 시작

### 생리 주기 설정
- **평균 주기**: 28일
- **평균 생리 기간**: 5일
- **자동 계산**: false

### 피임약 설정 (기본)
- **피임약으로 계산**: true
- **복용일**: 21일
- **휴약일**: 7일
- **총 주기**: 28일

**⚠️ 주요 차이점**: 피임약 복용 시
- 주기 = 복용일 + 휴약일 (고정)
- 휴약기 = 소퇴성 출혈 예상 기간
- 배란기/가임기 없음 (호르몬으로 배란 억제)
- 패키지 시작일부터 새로운 주기 시작

---

## 현재 패키지 조회 (마지막 패키지 시작 이후)

### TC-05-01: 1일 조회
#### 📌 테스트 목적
특정 날짜 1일만 조회할 때 피임약 복용 상태가 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-15
  - 종료: 2025-03-15
- **오늘 날짜**: 2025-03-25

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 없음
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 피임약 복용 중 배란기/가임기가 없는가
- [ ] 복용일차가 정확히 계산되는가
- [ ] 피임약 복용 상태가 올바르게 표시되는가

---

### TC-05-02: 1주일 조회
#### 📌 테스트 목적
1주일 기간 조회 시 피임약 복용 상태 변화가 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-19
  - 종료: 2025-03-25
- **오늘 날짜**: 2025-03-23

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-03-24 ~ 2025-03-28 (휴약 3일째부터)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 복용 기간에서 휴약 기간으로 전환이 표시되는가
- [ ] 휴약기간이 생리 예정일로 표시되는가
- [ ] 복용 상태 변화가 올바르게 표시되는가

---

### TC-05-03: 1개월 조회
#### 📌 테스트 목적
피임약 패키지 전체 주기 조회 시 복용기간과 휴약기간이 모두 정확히 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-03-28
- **오늘 날짜**: 2025-03-23

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-03-24 ~ 2025-03-28 (휴약 3일째부터)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 21일 복용 + 7일 휴약 = 28일 주기가 정확한가
- [ ] 휴약 기간이 생리 예정일로 표시되는가
- [ ] 전체 주기 동안 배란/가임기가 없는가

---

## 과거 조회 (패키지 시작 전)

### TC-05-04: 패키지 시작 1주 전
#### 📌 테스트 목적
피임약 시작 전 기간 조회 시 일반 주기 계산이 적용되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-20
  - 종료: 2025-02-28
- **오늘 날짜**: 2025-03-23

#### ✅ 예상 결과
- **주기 개수**: 2개

**주기 1 (pk=3)**:
- **실제 생리 기록**: Period 3 (2025-01-26 ~ 2025-01-30)
- **effectivePeriod**: 02-20 ~ 02-22 (조회 범위와 겹침)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 0
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 28일

**주기 2 (pk=4)**:
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 없음 (조회 범위 밖)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 시작)
- **가임기들**: 없음 (피임약 복용 시작)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 피임약 시작 전이므로 일반 주기 계산 적용
- [ ] 2개 주기가 반환됨 (Period 3, Period 4)
- [ ] 각 주기의 실제 생리 기간이 정확히 표시

---

### TC-05-05: 피임약 시작 전
#### 📌 테스트 목적
피임약 시작 전 날짜 조회 시 일반 생리 주기가 표시되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-15
  - 종료: 2025-02-15
- **오늘 날짜**: 2025-03-23
- **생리 기록**: Period 3만 사용 (2025-01-26 ~ 2025-01-30)
- **피임약 설정**:
  - 피임약으로 계산: false (피임약 미사용)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 3 (2025-01-26 ~ 2025-01-30)
- **생리 예정일들**: 없음 (조회 범위 밖)
- **생리 지연일**: 0
- **배란기들**: 없음
- **가임기들**: 없음 (구현에 따라 다를 수 있음)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 피임약 미사용 시 일반 주기 계산
- [ ] 조회 범위 밖 예정일은 반환되지 않음
- [ ] pk=3으로 올바른 주기 참조

---

## 특수 설정

### TC-05-06: 비표준 복용일 (20일)
#### 📌 테스트 목적
21일이 아닌 20일 복용 설정 시 정확히 계산되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-15
  - 종료: 2025-03-25
- **오늘 날짜**: 2025-03-22 (예정일 03-23 이전)
- **피임약 설정 변경**:
  - 복용일: 20일
  - 휴약일: 7일
  - 총 주기: 27일

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-03-23 ~ 2025-03-27 (20일 복용 + 2)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 27일

#### 🔍 검증 포인트
- [ ] 20일 복용 + 7일 휴약 = 27일 주기
- [ ] 휴약 3일째부터 생리 예정
- [ ] 주기가 27일로 계산됨

---

### TC-05-07: 최소 복용일 (20일)
#### 📌 테스트 목적
최소 복용일 설정 시 주기가 올바르게 계산되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-15
  - 종료: 2025-03-25
- **오늘 날짜**: 2025-03-22 (예정일 03-23 이전)
- **피임약 설정 변경**:
  - 복용일: 20일
  - 휴약일: 7일

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-03-23 ~ 2025-03-27 (20일 복용 + 2)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 27일

#### 🔍 검증 포인트
- [ ] 최소 복용일 20일이 정확히 적용
- [ ] 주기가 20 + 7 = 27일로 계산
- [ ] 휴약 3일째부터 생리 예정

---

### TC-05-08: 최대 복용일 (35일)
#### 📌 테스트 목적
최대 복용일 설정 시 주기가 올바르게 계산되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-04-11
- **오늘 날짜**: 2025-04-06 (예정일 이전)
- **피임약 설정 변경**:
  - 복용일: 35일
  - 휴약일: 7일

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-04-07 ~ 2025-04-11 (35일 복용 + 2)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 42일

#### 🔍 검증 포인트
- [ ] 최대 복용일 35일이 정확히 적용
- [ ] 주기가 35 + 7 = 42일로 계산
- [ ] 휴약 3일째부터 생리 예정

---

### TC-05-09: 휴약 없음 (0일)
#### 📌 테스트 목적
휴약 기간 없이 연속 복용 시 정확히 처리되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-15
  - 종료: 2025-03-21
- **오늘 날짜**: 2025-03-20
- **피임약 설정 변경**:
  - 복용일: 21일
  - 휴약일: 0일

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 없음 (휴약기 없음)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 21일

#### 🔍 검증 포인트
- [ ] 휴약기 없이 연속 복용
- [ ] 생리 예정일 없음
- [ ] 주기가 21일로 계산

---

### TC-05-10: 연속 복용 (0일 휴약)
#### 📌 테스트 목적
여러 패키지 연속 복용 시 계산이 정확한지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-01
  - 종료: 2025-04-15
- **오늘 날짜**: 2025-04-15
- **피임약 패키지**:
  - 1차: 2025-03-01 시작
  - 2차: 2025-03-22 시작
  - 3차: 2025-04-12 시작
- **피임약 설정 변경**:
  - 휴약일: 0일

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 없음 (연속 복용)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 21일

#### 🔍 검증 포인트
- [ ] 패키지 간 휴약 없이 연속
- [ ] 생리 예정일 없음
- [ ] 복용 상태 연속 유지

---

## 복잡한 시나리오

### TC-05-11: 여러 패키지 조회
#### 📌 테스트 목적
여러 피임약 패키지에 걸친 장기간 조회가 정확한지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-10
  - 종료: 2025-05-25
- **오늘 날짜**: 2025-05-18 (3차 예정일 05-19 이전, 지연 없음)
- **피임약 패키지**:
  - 1차: 2025-03-01 시작
  - 2차: 2025-03-29 시작
  - 3차: 2025-04-26 시작

#### ✅ 예상 결과
- **주기 개수**: 2개

**주기 1 (pk=3)**:
- **실제 생리 기록**: Period 3 (2025-01-26 ~ 2025-01-30)
- **effectivePeriod**: 02-10 ~ 02-22 (조회 범위와 겹침)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 0
- **배란기들**: 없음 (조회 범위 밖)
- **가임기들**: 없음 (조회 범위 밖)
- **주기**: 28일

**주기 2 (pk=4)**:
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 1개 (마지막 패키지 휴약기만 반환)
  - 2025-05-19 ~ 2025-05-23 (3차 휴약기, 04-26 + 21 + 2)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 2개 주기가 반환됨 (Period 3, Period 4)
- [ ] 마지막 패키지의 휴약기만 예정일로 반환
- [ ] 피임약 복용 중 배란기/가임기 없음

---

### TC-05-12: 생리 지연 (1-7일)
#### 📌 테스트 목적
피임약 복용 중 생리 지연 시 정확히 계산되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-20
  - 종료: 2025-04-05 (지연 적용된 예정일 포함)
- **오늘 날짜**: 2025-03-29 (예정 시작일 03-24 이후)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 지연일**: 6 (03-29 - 03-24 + 1 = 6)
- **지연 기간**: 2025-03-24 ~ 2025-03-29
- **생리 예정일들**: 2025-03-30 ~ 2025-04-03 (지연 다음날부터)
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 지연일 계산: 오늘 - 예정 시작일 + 1
- [ ] 지연 기간: 예정 시작일 ~ 오늘
- [ ] 예정일: 지연 다음날부터 시작

---

### TC-05-13: 생리 지연 (8일 이상)
#### 📌 테스트 목적
피임약 복용 중 8일 이상 지연 시 처리가 정확한지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-03-20
  - 종료: 2025-04-10
- **오늘 날짜**: 2025-04-02 (지연 10일)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 지연일**: 10 (04-02 - 03-24 + 1 = 10)
- **지연 기간**: 2025-03-24 ~ 2025-04-02
- **생리 예정일들**: 없음 (8일 이상 지연 시 표시 안 함)
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 지연일 계산: 오늘 - 예정 시작일 + 1
- [ ] 지연 기간: 예정 시작일 ~ 오늘
- [ ] 8일 이상 지연 시 예정일 표시 안 함 (병원 진료 권장)

---

### TC-05-14: 피임약 중단
#### 📌 테스트 목적
피임약 중단 후 일반 주기로 돌아가는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-04-01
  - 종료: 2025-04-30
- **오늘 날짜**: 2025-04-20
- **생리 기록**: Period 5 (2025-03-23 ~ 2025-03-27, pk=5)
- **피임약 설정 변경**:
  - 피임약으로 계산: false (피임약 중단)

#### ✅ 예상 결과
- **실제 생리 기록**: Period 5 (2025-03-23 ~ 2025-03-27)
- **생리 예정일들**: 2025-04-21 ~ 2025-04-25 (일반 주기 계산)
- **생리 지연일**: 0~1
- **배란기들**: 구현에 따라 반환 가능
- **가임기들**: 구현에 따라 반환 가능
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 피임약 중단 후 일반 주기 복귀
- [ ] pk=5로 올바른 주기 참조
- [ ] 마지막 생리 기준 계산 (03-23 + 28 + 1 = 04-21)

---

### TC-05-15: 일반 주기에서 피임약 전환
#### 📌 테스트 목적
일반 생리 주기에서 피임약으로 전환 시 올바르게 처리되는지 검증

#### 📝 입력 조건
- **조회 기간**:
  - 시작: 2025-02-10
  - 종료: 2025-03-31
- **피임약 패키지 시작**: 2025-03-01

#### ✅ 예상 결과
- **주기 개수**: 2개

**주기 1 (pk=3)**:
- **실제 생리 기록**: Period 3 (2025-01-26 ~ 2025-01-30)
- **effectivePeriod**: 02-10 ~ 02-22 (조회 범위와 겹침)
- **생리 예정일들**: 없음 (Period 4는 실제 기록)
- **생리 지연일**: 0
- **배란기들**: 조회 범위와 부분 겹침 (구현에 따라 다름)
- **가임기들**: 조회 범위와 부분 겹침 (구현에 따라 다름)
- **주기**: 28일

**주기 2 (pk=4)**:
- **실제 생리 기록**: Period 4 (2025-02-23 ~ 2025-02-27)
- **생리 예정일들**: 2025-03-24 ~ 2025-03-28 (피임약 휴약기, 03-01 + 21 + 2)
- **생리 지연일**: 0
- **배란기들**: 없음 (피임약 복용 중)
- **가임기들**: 없음 (피임약 복용 중)
- **주기**: 28일

#### 🔍 검증 포인트
- [ ] 2개 주기가 반환됨 (Period 3, Period 4)
- [ ] Period 4에서 피임약 주기 적용
- [ ] 전환 시점이 명확함

---

## 테스트 요약

### 커버리지
- **기본 조회**: 1일, 1주일, 1개월 (TC-05-01 ~ TC-05-03)
- **과거 조회**: 패키지 시작 전 (TC-05-04 ~ TC-05-05)
- **특수 설정**: 비표준 복용일, 휴약 없음 (TC-05-06 ~ TC-05-10)
- **복잡한 시나리오**: 여러 패키지, 지연, 전환 (TC-05-11 ~ TC-05-15)

### 주요 검증 사항
1. 피임약 복용 중 배란기/가임기 없음
2. 휴약기가 생리 예정일로 정확히 계산
3. 복용일 + 휴약일 = 주기
4. 패키지 간 전환 처리
5. 일반 주기와 피임약 주기 간 전환